import{ref as e,resolveComponent as t,openBlock as o,createElementBlock as l,toDisplayString as n,createBlock as i}from"vue";import{useStores as a}from"@directus/extensions-sdk";const u={props:{value:{type:String,default:null},column:{type:String,default:null},showTotal:{type:Boolean,default:!1},totalPrefix:{type:String,default:null},suffix:{type:String,default:null}},setup(t){const o=e(0),l=t.showTotal?t.value.length:null;return t.value.forEach((e=>{t.column.split(".").forEach((t=>{e=e[t]})),!e||"true"!==e&&"false"===e||(o.value+=1)})),{calculatedValue:o,total:l}}},s={key:0};var r={id:"directus-display-true-count",name:"Count Present or True",icon:"123",description:"Count present or true rows in a column",component:((e,t)=>{const o=e.__vccOpts||e;for(const[e,l]of t)o[e]=l;return o})(u,[["render",function(e,a,u,r,f,c){const d=t("value-null");return r.calculatedValue?(o(),l("div",s,n(r.calculatedValue)+n(u.totalPrefix)+n(r.total)+n(u.suffix),1)):(o(),i(d,{key:1}))}],["__file","display.vue"]]),options:({editing:e,relations:t})=>{const o=null!=t.o2m?.meta.junction_field?t.m2o?.related_collection:t.o2m?.collection,l=null!=t.o2m?.meta.junction_field?t.o2m?.collection:null,{useFieldsStore:n}=a(),i=n();let u;if("+"===e)u={interface:"presentation-notice",options:{text:"Please complete the field before attempting to configure the display."},width:"full"};else{const e=i.getFieldsForCollection(o),n=[];e.forEach((e=>{n.push({text:e.field,value:l?`${t.o2m.meta.junction_field}.${e.field}`:e.field})})),u={interface:"select-dropdown",options:{choices:n},width:"full"}}return[{field:"column",name:"Choose a column",meta:u},{field:"showTotal",type:"boolean",name:"Show Total",meta:{interface:"boolean",options:{label:"Show Total"},width:"half"}},{field:"totalPrefix",type:"string",name:"Total Prefix",meta:{interface:"input",options:{font:"monospace"},width:"half",hidden:!0,conditions:[{name:"showTotalTrue",rule:{showTotal:{_eq:!0}},hidden:!1}]}},{field:"suffix",type:"string",name:"Suffix",meta:{interface:"input",options:{font:"monospace"},width:"half"}}]},types:["alias","string","uuid","integer","bigInteger","json"],localTypes:["m2m","m2o","o2m","translations","m2a","file","files"],fields:e=>[e.column]};export{r as default};
